<view class="packages-container" style="background-image: url('https://yoursx-static-1371529546.cos.ap-guangzhou.myqcloud.com/page_bg_1.png'); background-size: 100% 100%; background-repeat: no-repeat; background-position: center;">
  <!-- 自定义导航栏 -->
  <custom-nav
    class="nav-container"
    title="套餐选择" 
    showBack="{{true}}"
    showHome="{{false}}"
    transparent="{{true}}"
    bgColor="#ffffff"
    bind:back="onBackClick"
  />

  <!-- 内容区域 -->
  <view class="content-container">

    <view class="vip-card" style="background-image: url('https://yoursx-static-1371529546.cos.ap-guangzhou.myqcloud.com/vip.png');">
      <view class="vip-card-header">
        <t-image class="vip-card-header-icon" src="{{vipInfo.ifVip ? '/static/vip_icon.png' : '/static/vip_no_icon.png'}}" />
        <text class="vip-card-header-text {{vipInfo.ifVip ? 'vip-card-header-text-vip' : 'vip-card-header-text-no-vip'}}">{{vipInfo.ifVip ? 'VIP' : '暂未开通VIP'}}</text>
        <view
          wx:if="{{vipInfo.ifVip}}"
          class="vip-card-header-remain">本月剩余<view class="vip-card-header-remain-time">{{vipInfo.monthlyRemaining || 0}}</view>次
        </view>
      </view>
      <view wx:if="{{vipInfo.ifVip}}" class="vip-card-bottom">
        <view class="deadline-time">{{vipInfo.formattedMonthlyExpireTime}} 到期</view>
        <view wx:if="{{vipInfo.monthlyRemainingDays > 0 && vipInfo.monthlyRemainingDays <= 5}}" class="deadline-time-countdown">过期将自动清零</view>
      </view>
      <view wx:else class="vip-card-bottom">
        开启专属于你的AI旅程
      </view>
      <!-- <view class="vip-renew" catchtap="onVipRenewClick">{{ vipInfo.ifVip ? '立即续费' : '开通VIP' }}</view> -->
    </view>

    <!-- VIP卡片 -->
    <!-- <view class="vip-card" style="background-image: url('https://yoursx-static-1371529546.cos.ap-guangzhou.myqcloud.com/vip.png');">
      <view class="vip-card-header">
        <t-image class="vip-card-header-icon" src="/static/vip_no_icon.png" />
        <text class="vip-card-header-text">开通VIP</text>
      </view>
      <text class="vip-card-bottom">开启专属于你的AI旅程</text>
      <view class="vip-card-noop">暂未开通</view>
    </view> -->

    <!-- 会员套餐选择 -->
    <view class="package-title section-title">加入VIP</view>
    <view class="package-list">
      <view wx:for="{{packages}}" wx:key="index" class="package-item {{selectedPackage.id === item.id ? 'package-item-active' : ''}}" 
        bindtap="onSelectPackage" 
        data-id="{{item.id}}">
        <view class="package-name">{{item.title}}</view>
        <view class="package-price">
          <view class="price-unit">¥</view>
          {{item.amountInYuan}}
        </view>
        <view class="package-original">¥{{item.originAmountInYuan}}</view>
        <view wx:if="{{item.discountInfo}}" class="package-tag">{{item.discountInfo}}</view>
      </view>
    </view>

    <!-- 会员权益 -->
    <view class="benefit-title section-title">会员权益</view>
    <view class="benefit-list">
      <view wx:for="{{selectedPackage.benefitInfoArr}}" wx:key="index" class="benefit-item">
        <t-icon class="benefit-icon" name="check-circle-filled" color="#FF5C8A" size="48rpx" />
        <view class="benefit-content">
          <rich-text class="benefit-name" nodes="{{item}}"></rich-text>
          <view class="benefit-desc">过期将自动清零</view>
        </view>
      </view>
    </view>

    <!-- 规则说明 -->
    <view class="rules-title section-title">规则说明</view>
    <view class="rules-content">
      <view class="rule-item">1.会员卡的使用额度，到期将自动清零。</view>
      <view class="rule-item">2.会员卡有效期为一个自然月。</view>
      <view class="rule-item">3.一次可购买多张会员卡，有限期自动顺延。</view>
      <view class="rule-item">4.会员卡与加油包可叠加购买，优先使用会员卡次数。</view>
      <view class="rule-item">5.VIP次数为0时，可叠加购买加油包，立即生效。</view>
      <view class="rule-item">6.支付成功后，不支持退款。</view>
    </view>

    <!-- 更多特权提示 -->
    <view class="more-privilege">更多权益敬请期待！</view>

    <!-- 购买按钮 -->
    <view class="purchase-button" bindtap="onPurchase">立即开通</view>

    <!-- 用户协议 -->
    <view class="agreement">
      <!-- 开通前阅读 <text class="agreement-link" bindtap="serviceTap">《Yours X用户服务协议》</text> 与 <text class="agreement-link" bindtap="renewTap">《自动续费服务规则》</text> -->
      开通前阅读 <text class="agreement-link" bindtap="serviceTap">《Yours X用户服务协议》</text>
      <view class="agreement-subtitle">确认购买并付款后即代表已同意</view>
    </view>
  </view>
</view>

<t-toast id="t-toast" /> 
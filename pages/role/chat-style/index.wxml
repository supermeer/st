<!--pages/role/style/index.wxml-->
<view class="style-page">
  <!-- 固定背景图 -->
  <image class="page-bg" src="https://yoursx-static-1371529546.cos.ap-guangzhou.myqcloud.com/chat_bg.png" mode="aspectFill"></image>
  
  <custom-nav title="" showBack="{{true}}" showHome="{{false}}" transparent="{{true}}" />
  <!-- 顶部Tab切换 -->
  <view class="tab-bar">
    <view 
      class="tab-item {{activeTab === 0 ? 'active' : ''}}"
      data-index="{{0}}"
      bind:tap="onTabChange"
    >
      <text class="tab-text">模版</text>
    </view>
    <view 
      class="tab-item {{activeTab === 1 ? 'active' : ''}}"
      data-index="{{1}}"
      bind:tap="onTabChange"
    >
      <text class="tab-text">我创建的</text>
    </view>
  </view>

  <!-- 可滚动内容区域 -->
  <scroll-view
    class="scroll-content"
    scroll-y
    enhanced
    show-scrollbar="{{false}}"
    scroll-top="{{scrollTop}}"
    style="height: calc(100vh - {{ pageInfo.navHeight }}px - 120rpx);"
  >
    <!-- 模版列表 -->
    <view class="style-list" style="padding-bottom: calc({{ pageInfo.safeAreaBottom}}px + 100rpx);" wx:if="{{activeTab === 0}}">
      <view class="empty-state" wx:if="{{templateList.length === 0}}">
        <text class="empty-text">暂无风格</text>
      </view>
      <view 
        class="style-item blur-glass" 
        wx:for="{{templateList}}" 
        wx:key="id"
        bind:tap="onImportStyle"
        data-id="{{item.id}}"
      >
        <view class="style-info">
          <view class="style-name">{{item.title}}</view>
          <view class="style-count">对话数：{{item.plotCount}}</view>
        </view>
        <view class="import-action">
          <text class="import-text">导入风格</text>
          <t-icon name="chevron-right" class="import-icon" size="24" />
        </view>
      </view>
    </view>

    <!-- 我创建的列表 -->
    <view class="style-list" wx:if="{{activeTab === 1}}">
      <view class="empty-state" wx:if="{{myStyleList.length === 0}}">
        <text class="empty-text">暂无创建的风格</text>
      </view>
      <view 
        class="style-item blur-glass" 
        wx:for="{{myStyleList}}" 
        wx:key="id"
        bind:tap="onImportStyle"
        data-id="{{item.id}}"
      >
        <view class="style-info">
          <view class="style-name">{{item.title}}</view>
          <view class="style-count">对话数：{{item.plotCount}}</view>
        </view>
        <view class="import-action">
          <text class="import-text">导入风格</text>
          <t-icon name="chevron-right" class="import-icon" size="24" />
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- 底部操作按钮 -->
  <view class="bottom-actions" style="padding-bottom: {{ pageInfo.safeAreaBottom }}px;">
    <view class="action-btn outline-btn" bind:tap="onResetSettings">
      <text class="btn-text">还原设置</text>
    </view>
    <view class="action-btn primary-btn" bind:tap="onCreateTemplate">
      <text class="btn-text">创建对话模板</text>
    </view>
  </view>
</view>


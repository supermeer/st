<t-overlay visible="{{visible}}" z-index="11500">
  <view class="text-optimizer-container" catchtouchmove="onTouchMove">
    <view class="text-optimizer-content">
      <!-- 标题栏 -->
      <view class="header">
        <view class="title">智能扩写</view>
        <t-icon name="close" size="24" color="#fff" bind:click="onClose" class="close-btn" />
      </view>

      <!-- 优化结果区域 -->
      <view class="result-section">  
        <!-- 加载状态 -->
        <view wx:if="{{loading}}" class="loading-container blur-glass">
          <t-loading theme="dots" text="智能润色扩写中..." layout="vertical" size="80rpx" class="loading-wrapper" t-class="custom-loading" t-class-text="custom-loading-text" />
        </view>
        
        <!-- 错误状态 -->
        <view wx:elif="{{error}}" class="error-container blur-glass">
          <t-icon name="close-circle" size="80rpx" color="#ff4d4f" />
          <text class="error-text">{{errorMessage}}</text>
          <view class="retry-btn" bindtap="optimizeText">
            <t-icon name="refresh" size="24" color="var(--magic-color)" />
            <text>重试</text>
          </view>
        </view>
        
        <!-- 优化结果 -->
        <view wx:elif="{{optimizedText}}" class="result-textarea blur-glass">
          <text class="result-text">{{optimizedText}}</text>
        </view>
        
        <!-- 空状态
        <view wx:else class="empty-result blur-glass">
          <text class="empty-text">点击"开始优化"按钮生成优化后的文案</text>
        </view> -->
      </view>

      <!-- 底部按钮 -->
      <view class="footer">
        <view
          class="footer-btn {{!optimizedText ? 'disabled' : ''}}"
          theme="primary"
          bindtap="onConfirm"
        >
          <t-icon name="check" size="24" color="#fff" />
          确认使用
        </view>
      </view>
    </view>
  </view>
</t-overlay> 